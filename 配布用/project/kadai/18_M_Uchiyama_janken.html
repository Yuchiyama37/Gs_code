<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/reset.css">
    <link rel="stylesheet" href="../css/poke.css">
    <script src="./jquery-2.1.3.min.js"></script>
    <title>Kadai2</title>
</head>

<div class="page">
    <body>
        <header id="header">
            <img id="logo" src="../img/log.jpeg" alt="ポケットモンスター">
            <span class="gametitle">チャンピオン に ちょうせん</span>

        </header>

        <main>
            <div class="names">
                <!-- プレイヤー -->
                <div class="playerName">サトシ</div>
                <!-- 対戦相手 -->
                <div class="oppName">ダンデ</div>
            </div>
            
            <div class="start">
                <button id="start">バトルスタート！！</button>
            </div>

            <div class="battlefield">
                <!-- プレイヤー画像 -->
                <div class="playrImage">
                    <img class="satoshi" src="../img/satohi.png" alt="サトシ" class="satoshi">
                </div>
            
            
            
            <!-- プレイヤーのPoke -->
                <div class="Img-playerPoke">
                    <div id="pikachu">ピカチュウ</div>
                </div>

                <div class="effect">
                <div id="pikaeffect"> </div>
                <img class="vs" src="../img/vs.png" alt="">
                <div id="rizaeffect"> </div>
                </div>

            <!-- 対戦相手のPoke -->
                <div class="Img-oppPoke">
                    <div id="rizardon">リザードン</div>
                </div>

                <div class="oppImage">
                    <img class="Dande" src="Dande.png" alt="ダンデ">
                </div>
            </div>

            <!-- HPゲージ -->
            <div class="hpguage">
                <div class="pokename">
                    <p>ピカチュウ</p>
                    <p>リザードン</p>
                </div>
                
                <div class="pikarizahp">
                    <div class="pikahp">   
                        <p>HP<span id="playerhp"></span></p>
                    </div>
                    <div class="rizahp">    
                        <p>HP<span id="opphp"></span></p>
                    </div>
                </div>
            </div>

            <!-- ワザを出す -->
            <div class="actionarea">
                <button id="action">わざを出す</button>
            </div>

            <!-- メッセージ欄 -->
            <div class="message"> 
                <div><p id="line1">しょうぶ だ！！</p></div>
                <div><p id="line2"></p></div>
                <div><p id="line3"></p></div>
                <div><p id="line4"></p></div>
                <div><p id="line5"></p></div>
                <div><p id="line6"></p></div>
                <div><p id="line7"></p></div>
                <div><p id="line8"></p></div>
                <div><p id="line9"></p></div>
                <div><p id="line10"></p></div>
                <div><p id="line11"></p></div>
                <div><p id="judgment"></p></div>
            


        </main>
        <footer> </footer>

    </div>

    <script>
        // ピカチュウのHP
        $("#playerhp").fadeOut(0);
        let pikahp = 20
        $("#playerhp").text(pikahp);
        
        // リザードンのHP
        $("#opphp").fadeOut(0);
        let rizahp = 20
        $("#opphp").text(rizahp);
        // const opphp = document.querySelector("#opphp")
        // $("#opphp").text(opphp);
        // $("playerhp").text(opphp)

        $("#action").fadeOut(0);
        
        // 最初はモンボを表示
        $("#pikachu").html('<img src="ImgOppP1.png">');
        $("#rizardon").html('<img src="ImgOppP1.png">');

        // バトルスタートをクリックしたら
        $("#start").on("click", function(){
            $("#line1").text("バトルスタート！！");  
            $("#line2").text("ダンデはリザードンをくりだしてきた！");
            $("#opphp").fadeIn(0);
            $("#rizardon").html('<img src="ImgOppP2.png" width=400px>');
            $("#rizardon").fadeOut(0);
            $("#rizardon").fadeIn(1000);
            $("#line3").text("ピカチュウ！きみに決めた！");
            $("#line3").fadeOut(0);
            $("#line3").fadeIn(2500);
            $("#playerhp").fadeIn(0);
            $("#pikachu").html('<img src="pikachu.png" width=300px>');
            $("#pikachu").fadeOut(0);
            $("#pikachu").fadeIn(3500);

            // ボタン無効化
            let start = document.querySelector("#start")
            start.disabled = true

            $("#action").fadeIn(0); 

        }
        )

        // わざを出すをクリックしたら
        $("#action").on("click", function(){
            $("#line1").fadeOut(0); 
            $("#line2").fadeOut(0); 
            $("#line3").fadeOut(0); 
          
            // $("#line4").fadeOut(0); 
            // $("#line5").fadeOut(0); 
            // $("#pikaeffect").fadeOut(0); 
            
            // ピカチュウのわざ決定（乱数１を生成）
            const r1 = Math.ceil(Math.random()*4 );
            let waza1 = "";
            if(r1==1){
                waza1 = "10万ボルトだ!!";
                $("#line4").text("こうかは ばつぐんだ！"); 
                // $("#pikaeffect").html('<img src="denki.jpeg">');
            }
            if(r1==2){
                waza1 = "アイアンテールだ!!"    
                $("#line4").text("こうかは いまひとつのようだ...");
            }
            if(r1==3){
                waza1 = "でんこうせっかだ!!"
            }
            if(r1==4){
                waza1 = "エレキネットだ!!"
                $("#line4").text("こうかは ばつぐんだ！"); 
            }
            $("#line4").text("ピカチュウ、" + waza1);  
            

            // リザードンにダメージを与える
            let damage1 = 0;
            if(r1==1){
                // damage1 = 60;
                rizahp--;
                rizahp--;
                rizahp--;
                rizahp--;
                rizahp--;
                rizahp--;
            }
            if(r1==2){
                // damage1 = 40;
                rizahp--;
                rizahp--;
                rizahp--;
                rizahp--;
            }
            if(r1==3){
                // damage1 = 30;
                rizahp--;
                rizahp--;
                rizahp--;

            }
            if(r1==4){
                // damage1 = 20; 
                rizahp--;
                rizahp--;
            }
            let opphp1 = document.getElementById("opphp");
            opphp1.innerHTML = (rizahp);

            //  リザードンのわざ決定（乱数2を生成）
            const r2 = Math.ceil(Math.random()*4 );
            let waza2 = "";
            if(r2==1){
                waza2 = "だいもんじ!!";
            }
            if(r2==2){
                waza2 = "げんしのちから!!"
            }
            if(r2==3){
                waza2 = "エアスラッシュ!!"
                $("#line5").text("こうかは いまひとつのようだ...");

            }
            if(r2==4){
                waza2 = "りゅうのはどう!!"
            }
            $("#line5").text("ダンデのリザードンの" + waza2);
            
            // ピカチュウにダメージを与える
            let damage2 = 0;
            if(r2==1){
                // damage2 = 50;
                pikahp--;
                pikahp--;
                pikahp--;
                pikahp--;
                pikahp--;
                pikahp--;
                pikahp--;
                pikahp--;
                


            }
            if(r2==2){
                // damage2 = 40;
                pikahp--;

            }
            if(r2==3){
                // damage2 = 20;
                pikahp--;
                pikahp--;

            }
            if(r2==4){
                // damage2 = 40;
                pikahp--;

            }
            let playerhp1 = document.getElementById("playerhp");
            playerhp1.innerHTML = (pikahp);
            let action = document.querySelector("#action")
            
            let result = ""
            if(rizahp <= 0){
                $("#opphp").text(0);
                if(pikahp > 0)
                    result = "チャンピオンのダンデにかった！！！";
                    $("#judgment").text(result)
                    action.disabled = true
            }
            if(pikahp <= 0){
                $("#playerhp").text(0);
                if(rizahp > 0){
                    result = "チャンピオンのダンデにまけた";
                    $("#judgment").text(result);
                    action.disabled = true
                    
                    
                }
            }
            // if(rizahp <= 0){
            //     if(pikahp <= 0)
            //     result = "ひきわけだ"
            // }
            else{
                result=""
            }


        })
        


        // let img = document.getElementById("ImgOppP");
        // let idx = 1
        // img.src = "ImgOppP" + idx + ".png"
        
        // これでは表示されない
        // $("#ImgOppP").html('<img.src="ImgOppP1.png">');
        
        // const imgs = ['pokeball.png','Aceburn.png','Inteleon.png', 'Gorirander.png']
        // let index = 0;

        // $("#ImgOppP").attr('src','images/' + imgs[index])

        // $("#ImgOppP").html('<img src="../img/Aceburn.png">');
        
        

        // const num = Math.ceil(Math.random()*1);
        
        // if (num ==1){
        //     $("#ImgOppP").html();
        // }
        

        
        

    </script>
    </body>
</div>
</html>